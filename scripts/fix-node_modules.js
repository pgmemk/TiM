#!/usr/bin/env node

const fs = require('fs')
const path = require('path')

const fixBluebirdQ = () => {
  const source = 'require("bluebird/js/main/promise")()'
  const target = 'require("bluebird")'
  const filePath = path.resolve(__dirname, '../node_modules/bluebird-q/index.js')
  const bluebirdQ = fs.readFileSync(filePath, 'utf8')
  const idx = bluebirdQ.indexOf(source)
  if (idx !== -1) {
    fs.writeFileSync(filePath, bluebirdQ.replace(source, target))
  }
}

fixBluebirdQ()
